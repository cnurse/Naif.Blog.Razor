@using Naif.Blog.Models

@inherits ListComponentBase

@{
	foreach (var post in Posts)
	{
		var editUrl = $"{BaseUrl}/{post.PostId}";
		
		<section>
            @ExcerptFragment(new Tuple<Post, string>(post, editUrl))
            @Separator
		</section>
	}
}

@code {
	
	[Parameter]
	public RenderFragment<Tuple<Post, string>> ExcerptFragment { get; set; } = (t) =>
	{
		var post = t.Item1;
		var editUrl = t.Item2;
		
		var link = $"/post/{post.Slug}";

		return @<article class="excerpt">
			       <header>
		               <div class="row">
                           <div class="col-lg-11">
						       <h3><a href="@link">@post.Title</a></h3>
                           </div>
                           <div class="col-lg-1">
                               <h3><a class="link" href="@editUrl"><i class="bi bi-pencil"></i></a></h3>
                           </div>
                       </div>

			       </header>
			       <section>
				       <p>@((MarkupString) post.Excerpt)</p>
			       </section>
		       </article>;
	};

	[Parameter]
	public RenderFragment Separator { get; set; } = @<hr>;
	
	[Parameter]
	public string BaseUrl { get; set; }
}